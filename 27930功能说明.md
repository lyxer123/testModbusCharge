# 27930充电桩测试功能说明

## 功能概述

27930测试功能页是基于GB/T 27930-2015《电动汽车非车载传导式充电机与电池管理系统之间的通信协议》标准实现的充电桩测试工具。

## 主要功能

### 1. CAN接口设置
- **CAN设备选择**: 支持多种CAN设备类型（CAN1, CAN2, USB-CAN, PCI-CAN）
- **CAN波特率**: 支持标准波特率（125000, 250000, 500000, 1000000）
- **CAN通道**: 支持双通道设置（0, 1）
- **设备状态**: 实时显示CAN设备连接状态

### 2. 27930功能设置
- **消息类型**: 支持多种充电协议消息类型
  - 充电握手
  - 充电参数配置
  - 充电状态
  - 充电统计
  - 充电停止
  - 自定义消息
- **地址设置**: 支持发送方和接收方地址配置
- **进制选择**: 支持十进制和十六进制地址格式

### 3. 扫描功能
- **定时扫描**: 可设置扫描间隔（最小100ms）
- **扫描控制**: 开始/停止扫描功能
- **状态显示**: 实时显示扫描状态

### 4. 数据显示
- **原始数据区域**: 显示CAN原始数据包
- **数据解析区域**: 显示解析后的27930协议数据
- **格式选择**: 支持十六进制和十进制显示格式

## 界面布局

### 左侧设置区域
```
┌─────────────────────────┐
│     CAN接口设置         │
├─────────────────────────┤
│ CAN设备: [CAN1] [刷新] │
│ CAN波特率: [500000]    │
│ CAN通道: [0]           │
│ [打开/关闭]            │
├─────────────────────────┤
│     27930功能          │
├─────────────────────────┤
│ 消息类型: [充电握手]   │
│ 发送方地址: [01] [HEX] │
│ 接收方地址: [02] [HEX] │
│ 扫描: [1000ms] [开始] │
├─────────────────────────┤
│     显示设置           │
├─────────────────────────┤
│ ○十六进制 ○十进制      │
│ [发送] [清空]          │
└─────────────────────────┘
```

### 右侧数据显示区域
```
┌─────────────────────────────────┐
│           原始数据              │
│ [CAN数据包显示区域]             │
└─────────────────────────────────┘
┌─────────────────────────────────┐
│           数据解析              │
│ [27930协议解析显示区域]         │
└─────────────────────────────────┘
```

## 使用说明

### 1. 基本操作流程
1. 选择CAN设备并设置参数
2. 点击"打开"按钮连接CAN设备
3. 选择27930消息类型
4. 设置发送方和接收方地址
5. 点击"发送"按钮发送数据
6. 查看原始数据和解析结果

### 2. 扫描模式
1. 设置扫描间隔（毫秒）
2. 点击"开始"按钮启动定时扫描
3. 系统将按设定间隔自动发送数据
4. 点击"停止"按钮停止扫描

### 3. 数据显示
- **原始数据**: 显示完整的CAN数据包（包括CAN ID和数据）
- **数据解析**: 显示27930协议解析结果，包括消息类型、地址信息等

## 技术特性

### 1. 协议支持
- 基于GB/T 27930-2015标准
- 支持多种充电协议消息类型
- 完整的CAN数据包处理

### 2. 用户界面
- 现代化界面设计
- 响应式布局
- 实时状态显示
- 工具提示功能

### 3. 数据处理
- 支持多种数据格式
- 实时数据解析
- 错误处理和验证

## 扩展功能

### 1. 自定义消息
- 支持用户自定义27930消息
- 灵活的数据包配置
- 自定义CAN ID设置

### 2. 数据记录
- 支持数据记录和回放
- 历史数据查看
- 数据导出功能

### 3. 协议扩展
- 支持其他充电协议标准
- 可扩展的消息类型
- 插件式架构

## 注意事项

1. **CAN设备连接**: 确保CAN设备正确连接并驱动已安装
2. **波特率设置**: 确保CAN设备波特率与目标设备匹配
3. **地址配置**: 根据实际充电桩配置设置正确的地址
4. **数据格式**: 注意数据格式的一致性

## 版本信息

- 版本: 1.0
- 创建日期: 2025年
- 开发者: lyxer123
- 协议标准: GB/T 27930-2015 